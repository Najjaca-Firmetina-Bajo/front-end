<div class="centered-container" *ngIf="company">
  <mat-card>
    <mat-card-content>
      <div class="centered-container">
        <h2>{{ company.name }}</h2>
        <p>Address: {{ company.address }}</p>
        <p>Average Rating: {{ company.averageRating }}</p>
      </div>
    </mat-card-content>
  </mat-card>
</div>

<div class="container">
  <!-- Left side: Company Info, Equipment, Selected Equipment -->
  <div class="left-side">
    <mat-card>
      <mat-card-content>
        <p><b>Equipment:</b></p>
        <table mat-table [dataSource]="filteredEquipment">

          <ng-container matColumnDef="select">
            <th mat-header-cell *matHeaderCellDef>Select</th>
            <td mat-cell *matCellDef="let equipment">
              <input type="checkbox" [checked]="getIsSelected(equipment)" (change)="toggleEquipmentSelection(equipment)">
            </td>
          </ng-container>
        
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Name</th>
            <td mat-cell *matCellDef="let equipment">{{ equipment.name }}</td>
          </ng-container>
        
          <ng-container matColumnDef="type">
            <th mat-header-cell *matHeaderCellDef>Type</th>
            <td mat-cell *matCellDef="let equipment">{{ equipment.type }}</td>
          </ng-container>
        
          <ng-container matColumnDef="companies">
            <th mat-header-cell *matHeaderCellDef>Companies</th>
            <td mat-cell *matCellDef="let equipment">{{ equipment.companies.join(', ') }}</td>
          </ng-container>
        
          <!-- Table Rows -->
          <tr mat-header-row *matHeaderRowDef="['select', 'name', 'type', 'companies']"></tr>
          <tr mat-row *matRowDef="let equipment; columns: ['select', 'name', 'type', 'companies']"></tr>
        </table>
      </mat-card-content>
    </mat-card>

    <br>

    <mat-card>
      <mat-card-content>
        <h3>Selected Equipment</h3>
        <ul style="list-style-type: none; padding: 0; margin: 0;">
          <li *ngFor="let equipment of filteredEquipment">
            <ng-container *ngIf="getIsSelected(equipment)">
              {{ equipment.name }}
            </ng-container>
          </li>
        </ul>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Right side: Appointments and Selected Appointment -->
  <div class="right-side">
    <mat-card>
      <mat-card-content>
        <table mat-table [dataSource]="appointments">
          <!-- Radio Column -->
          <ng-container matColumnDef="select">
            <th mat-header-cell *matHeaderCellDef>Select</th>
            <td mat-cell *matCellDef="let row">
              <input type="radio"  [(ngModel)]="selectedAppointment" [value]="row">
            </td>
          </ng-container>

          <!-- Other Columns -->
          <ng-container matColumnDef="pickUpDate">
            <th mat-header-cell *matHeaderCellDef>Appointment ID</th>
            <td mat-cell *matCellDef="let row">{{ row.pickUpDate }}</td>
          </ng-container>

          <!-- Table Rows -->
          <tr mat-header-row *matHeaderRowDef="['select', 'pickUpDate']"></tr>
          <tr mat-row *matRowDef="let row; columns: ['select', 'pickUpDate']"></tr>
        </table>
      </mat-card-content>
    </mat-card>

    <mat-card>
      <mat-card-content>
        <h3>Selected Appointment</h3>
        <p *ngIf="selectedAppointment">Appointment ID: {{ selectedAppointment.pickUpDate }}</p>
      </mat-card-content>
    </mat-card>

    <div style="margin-top: 20px;">
      <button mat-button color="primary" (click)="reserveAppointment()">Reserve</button>
    </div>
  </div>
</div>
